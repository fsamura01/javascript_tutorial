<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Partition Size Formula</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .example {
            margin: 30px 0;
            padding: 25px;
            background: #f8f9ff;
            border-radius: 10px;
            border-left: 5px solid #667eea;
        }
        
        .string-viz {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            gap: 2px;
        }
        
        .char-box {
            width: 50px;
            height: 70px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px solid #ddd;
            border-radius: 5px;
            background: white;
            transition: all 0.3s;
        }
        
        .char-box.highlight {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .char-box.start {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }
        
        .char-box.end {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }
        
        .char {
            font-size: 24px;
            font-weight: bold;
        }
        
        .index {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        
        .highlight .index {
            color: white;
        }
        
        .formula {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #ffc107;
            font-size: 18px;
        }
        
        .formula-step {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
        }
        
        .correct {
            color: #4caf50;
            font-weight: bold;
        }
        
        .wrong {
            color: #f44336;
            font-weight: bold;
        }
        
        .interactive {
            margin: 30px 0;
            padding: 25px;
            background: #e8f5e9;
            border-radius: 10px;
            border-left: 5px solid #4caf50;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            align-items: center;
        }
        
        input[type="number"] {
            padding: 10px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 5px;
            width: 80px;
        }
        
        button {
            padding: 10px 20px;
            font-size: 16px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #5568d3;
        }
        
        .result {
            font-size: 20px;
            font-weight: bold;
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 5px;
        }
        
        .legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-box {
            width: 30px;
            height: 30px;
            border-radius: 5px;
            border: 2px solid #ddd;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìè Understanding: i - start + 1</h1>
        
        <div class="example">
            <h2>Example 1: Simple String</h2>
            <p><strong>String:</strong> "abc"</p>
            <p><strong>Partition:</strong> From start=0 to i=2 (entire string)</p>
            
            <div class="string-viz">
                <div class="char-box start">
                    <div class="char">a</div>
                    <div class="index">0</div>
                </div>
                <div class="char-box highlight">
                    <div class="char">b</div>
                    <div class="index">1</div>
                </div>
                <div class="char-box end">
                    <div class="char">c</div>
                    <div class="index">2</div>
                </div>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-box" style="background: #4caf50; border-color: #4caf50;"></div>
                    <span>start position</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box" style="background: #667eea; border-color: #667eea;"></div>
                    <span>included in partition</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box" style="background: #f44336; border-color: #f44336;"></div>
                    <span>end position (i)</span>
                </div>
            </div>
            
            <div class="formula">
                <div class="formula-step">
                    <strong>Without +1:</strong> <span class="wrong">i - start = 2 - 0 = 2</span> ‚ùå
                    <br><small>(Says we have 2 characters, but we actually have 3!)</small>
                </div>
                <div class="formula-step">
                    <strong>With +1:</strong> <span class="correct">i - start + 1 = 2 - 0 + 1 = 3</span> ‚úì
                    <br><small>(Correctly counts all 3 characters: a, b, c)</small>
                </div>
            </div>
        </div>
        
        <div class="example">
            <h2>Example 2: LeetCode Problem</h2>
            <p><strong>String:</strong> "ababcbaca..."</p>
            <p><strong>First Partition:</strong> From start=0 to i=8</p>
            
            <div class="string-viz">
                <div class="char-box start">
                    <div class="char">a</div>
                    <div class="index">0</div>
                </div>
                <div class="char-box highlight">
                    <div class="char">b</div>
                    <div class="index">1</div>
                </div>
                <div class="char-box highlight">
                    <div class="char">a</div>
                    <div class="index">2</div>
                </div>
                <div class="char-box highlight">
                    <div class="char">b</div>
                    <div class="index">3</div>
                </div>
                <div class="char-box highlight">
                    <div class="char">c</div>
                    <div class="index">4</div>
                </div>
                <div class="char-box highlight">
                    <div class="char">b</div>
                    <div class="index">5</div>
                </div>
                <div class="char-box highlight">
                    <div class="char">a</div>
                    <div class="index">6</div>
                </div>
                <div class="char-box highlight">
                    <div class="char">c</div>
                    <div class="index">7</div>
                </div>
                <div class="char-box end">
                    <div class="char">a</div>
                    <div class="index">8</div>
                </div>
            </div>
            
            <div class="formula">
                <div class="formula-step">
                    <strong>Without +1:</strong> <span class="wrong">i - start = 8 - 0 = 8</span> ‚ùå
                    <br><small>(Missing one character!)</small>
                </div>
                <div class="formula-step">
                    <strong>With +1:</strong> <span class="correct">i - start + 1 = 8 - 0 + 1 = 9</span> ‚úì
                    <br><small>(Correctly counts all 9 characters in the partition)</small>
                </div>
            </div>
        </div>
        
        <div class="interactive">
            <h2>üéÆ Interactive Calculator</h2>
            <p>Try your own values to see how the formula works:</p>
            
            <div class="controls">
                <label>
                    <strong>start:</strong>
                    <input type="number" id="startInput" value="0" min="0">
                </label>
                <label>
                    <strong>i (end):</strong>
                    <input type="number" id="endInput" value="5" min="0">
                </label>
                <button onclick="calculate()">Calculate</button>
            </div>
            
            <div class="result" id="result">
                Click "Calculate" to see the result
            </div>
        </div>
        
        <div class="example">
            <h2>üí° Key Insight</h2>
            <p style="font-size: 18px; line-height: 1.6;">
                The <strong>+1</strong> accounts for zero-based indexing. When you subtract indices, 
                you get the number of "gaps" between positions. But you need to count the 
                positions themselves, which is always one more than the number of gaps!
            </p>
            <p style="font-size: 16px; margin-top: 15px;">
                <strong>Think of it like fence posts:</strong> If you have posts at positions 0, 1, 2, 3, 
                there are 3 gaps between them, but 4 posts total. The formula 
                <code style="background: #f0f0f0; padding: 3px 8px; border-radius: 3px;">end - start + 1</code> 
                counts the posts, not the gaps!
            </p>
        </div>
    </div>
    
    <script>
        function calculate() {
            const start = parseInt(document.getElementById('startInput').value);
            const end = parseInt(document.getElementById('endInput').value);
            
            if (end < start) {
                document.getElementById('result').innerHTML = 
                    '<span class="wrong">‚ö†Ô∏è End position must be >= start position</span>';
                return;
            }
            
            const without = end - start;
            const with1 = end - start + 1;
            
            const positions = [];
            for (let i = start; i <= end; i++) {
                positions.push(i);
            }
            
            document.getElementById('result').innerHTML = `
                <div>Positions included: <strong>${positions.join(', ')}</strong></div>
                <div style="margin-top: 10px;">Total positions: <strong>${positions.length}</strong></div>
                <div style="margin-top: 15px; padding-top: 15px; border-top: 2px solid #eee;">
                    <div><span class="wrong">Without +1:</span> ${end} - ${start} = <strong>${without}</strong> ‚ùå</div>
                    <div style="margin-top: 8px;"><span class="correct">With +1:</span> ${end} - ${start} + 1 = <strong>${with1}</strong> ‚úì</div>
                </div>
            `;
        }
        
        // Calculate on load
        calculate();
    </script>
</body>
</html>